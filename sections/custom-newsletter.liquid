{% schema %}
{
  "name": "Custom Newsletter",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "color",
      "id": "col1_bg",
      "label": "Column 1 Background",
      "default": "#95C940"
    },
    {
      "type": "color",
      "id": "col2_bg",
      "label": "Column 2 Background",
      "default": "#F89821"
    },
    {
      "type": "color",
      "id": "col3_bg",
      "label": "Column 3 Background",
      "default": "#95C940"
    },
    {
      "type": "text",
      "id": "btn_text",
      "label": "Button Text (Col 1)",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "btn_url",
      "label": "Button URL (Col 1)",
      "default": "/collections/all"
    },
    {
      "type": "richtext",
      "id": "rich_text_1",
      "label": "Rich Text - Column 1",
      "default": "<p>Free shipping on orders over $50</p>"
    },
    {
      "type": "text",
      "id": "newsletter_btn_text",
      "label": "Newsletter Button Text",
      "default": "Join"
    },
    {
      "type": "richtext",
      "id": "rich_text_2",
      "label": "Rich Text - Column 2",
      "default": "<p>Get exclusive offers & updates</p>"
    },
    {
      "type": "url",
      "id": "social_facebook",
      "label": "Facebook URL"
    },
    {
      "type": "url",
      "id": "social_instagram",
      "label": "Instagram URL"
    },
    {
      "type": "url",
      "id": "social_tiktok",
      "label": "tiktok URL"
    },
    {
      "type": "richtext",
      "id": "rich_text_3",
      "label": "Rich Text - Column 3",
      "default": "<p>Follow us for updates</p>"
    }
  ],
  "presets": [
    {
      "name": "Custom Newsletter"
    }
  ]
}
{% endschema %}

<div class="custom-newsletter page-width color-{{ section.id }}">
  <div class="custom-newsletter__inner">
    <div class="columns-wrapper">

      <!-- Column 1 -->
      <div class="column column-1" style="background-color: {{ section.settings.col1_bg }};">
        <a href="{{ section.settings.btn_url }}" class="button btn-2"><span>{{ section.settings.btn_text }}</span></a>
        <div class="rich-text">
          {{ section.settings.rich_text_1 }}
        </div>
      </div>

      <!-- Column 2 -->
      <div class="column column-2" style="background-color: {{ section.settings.col2_bg }};">
        <form class="newsletter-inline" id="newsletter-form-{{ section.id }}" action="/contact#contact_form" method="post">
          <input type="hidden" name="form_type" value="customer">
          <input type="hidden" name="utf8" value="âœ“">
          <input type="hidden" name="contact[tags]" value="newsletter">

          <div class="newsletter-group">
            <input
              type="email"
              name="contact[email]"
              placeholder="Join our email list...."
              required
              autocomplete="off"
              autocorrect="off"
              autocapitalize="off"
              spellcheck="false"
              class="newsletter-input"
            >
            <button type="submit" class="newsletter-btn button btn-1">
              <span>{{ section.settings.newsletter_btn_text | default: 'Subscribe' }}</span>
            </button>
          </div>
          <p class="newsletter-message" id="newsletter-message-{{ section.id }}"></p>
        </form>

        <div class="rich-text">
          {{ section.settings.rich_text_2 }}
        </div>
      </div>

      <!-- Column 3 -->
      <div class="column column-3" style="background-color: {{ section.settings.col3_bg }};">
        <div class="social-icons">
          {% if section.settings.social_facebook != blank %}
            <a href="{{ section.settings.social_facebook }}" target="_blank" class="social-icon" rel="noopener">
              <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
            </a>
          {% endif %}
          {% if section.settings.social_instagram != blank %}
            <a href="{{ section.settings.social_instagram }}" target="_blank" class="social-icon" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="512" height="512" x="0" y="0" viewBox="0 0 24 24" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M17 2H7C4.24 2 2 4.24 2 7v10c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5V7c0-2.76-2.24-5-5-5zm-5 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm5.35-9.38c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" fill="#63441d" opacity="1" data-original="#000000" class=""/><circle cx="12" cy="12" r="3" fill="#63441d" opacity="1" data-original="#000000" class=""/></g></svg>
            </a>
          {% endif %}
          {% if section.settings.social_tiktok != blank %}
            <a href="{{ section.settings.social_tiktok }}" target="_blank" class="social-icon" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512"><g><path d="m480.32 128.39c-29.22 0-56.18-9.68-77.83-26.01-24.83-18.72-42.67-46.18-48.97-77.83-1.56-7.82-2.4-15.89-2.48-24.16h-83.47v228.08l-.1 124.93c0 33.4-21.75 61.72-51.9 71.68-8.75 2.89-18.2 4.26-28.04 3.72-12.56-.69-24.33-4.48-34.56-10.6-21.77-13.02-36.53-36.64-36.93-63.66-.63-42.23 33.51-76.66 75.71-76.66 8.33 0 16.33 1.36 23.82 3.83v-62.34-22.41c-7.9-1.17-15.94-1.78-24.07-1.78-46.19 0-89.39 19.2-120.27 53.79-23.34 26.14-37.34 59.49-39.5 94.46-2.83 45.94 13.98 89.61 46.58 121.83 4.79 4.73 9.82 9.12 15.08 13.17 27.95 21.51 62.12 33.17 98.11 33.17 8.13 0 16.17-.6 24.07-1.77 33.62-4.98 64.64-20.37 89.12-44.57 30.08-29.73 46.7-69.2 46.88-111.21l-.43-186.56c14.35 11.07 30.04 20.23 46.88 27.34 26.19 11.05 53.96 16.65 82.54 16.64v-60.61-22.49c.02.02-.22.02-.24.02z"/></g></svg>
            </a>
          {% endif %}
        </div>

        <div class="rich-text">
          {{ section.settings.rich_text_3 }}
        </div>
      </div>

    </div>
  </div>
</div>

{% stylesheet %}
.custom-newsletter {
  font-size: 21px;
}

.custom-newsletter__inner {
  max-width: 100%;
  margin: 0 auto;
  padding: 0 0;
}

.columns-wrapper {
  display: flex;
  flex-wrap: wrap;
  gap: 0;
}

.column {
  flex: 1;
  min-width: 250px;
  padding: 40px 24px 50px;
  display: flex;
  flex-direction: column;
}

.column-1 { flex: 0 0 25%; align-items: center; gap: 15px; }
.column-2 { flex: 0 0 50%; gap: 15px; padding: 40px 70px;}
.column-3 { flex: 0 0 25%; align-items: center; gap: 15px; }

.column-1 p { max-width: 211px; font-size: 21px; text-align: center; line-height: 33px; font-weight: 400;}
.column-2 .rich-text p { font-size: 21px; line-height: 33px; font-weight: 400;}
.column-3 .rich-text p { max-width: 200px; font-size: 21px; text-align: center;line-height: 33px; font-weight: 400;}

.newsletter-group {
  display: flex;
  gap: 8px;
  flex-wrap: nowrap;
}

.newsletter-input {
  flex: 1;
  padding: 12px;
  border: 3px solid rgba(166, 101, 21, 1);
  border-radius: 5px;
  font-size: 21px;
  background-color: rgba(241, 234, 217, 1);
  color: rgba(99, 68, 29, 1);
}

.newsletter-input::placeholder {
    color: rgba(99, 68, 29, 1);
}

.newsletter-input:hover {
  background-color: rgba(241, 234, 217, 1);
}

.newsletter-btn {
  white-space: nowrap;
}

.newsletter-message {
  margin: 8px 0 0;
  font-size: 13px;
  min-height: 20px;
}

.social-icons {
  display: flex;
  gap: 12px;
}

.social-icon svg {
  width: 55px;
  height: 55px;
  box-shadow: 0 5px 0 #A66515;
  border-radius: 40px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.rich-text :global(p) {
  margin: 0 0 8px;
  line-height: 1.5;
}

.rich-text :global(p:last-child) {
  margin-bottom: 0;
}
.column-1 .button {
  background: transparent!important;
  color: #63441D;
  font-family: "GT Walsheim";
  font-size: 30px;
  line-height: 44px;
  font-weight: 700;
  text-decoration: none;
  box-shadow: none;
  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease;
  text-align: center;
  border-radius: 35px;
  padding: 8px 34px;
  border: none;
  text-transform: lowercase;
    transform: none !important;
}

.column-1 .button:before {
  background: url(https://cdn.shopify.com/s/files/1/0577/3957/5488/files/Vector_23_4.png?v=1764654764);
  background-size: 100% 100%;
  z-index: 2;
}

.column-1 .button span {
  z-index: 3;
}

.column-1 .button:after {
  content: '';
   background: url(https://cdn.shopify.com/s/files/1/0577/3957/5488/files/Vector_25_1.png?v=1764654764);
  background-size: 100% 100%;
  padding: 8px 34px;
  bottom: -6px;
  z-index: 1;
  box-shadow: none;
}

.column-1 .button:hover:before {
  background: url(https://cdn.shopify.com/s/files/1/0577/3957/5488/files/Vector_23_5.png?v=1764654764) !important;
  background-size: 100% 100% !important;
}

.column-2 .button{
  background: transparent!important;
  color: #0F4735;
  font-family: "GT Walsheim";
  font-size: 30px;
  font-weight: 700;
  line-height: 44px;
  text-decoration: none;
  box-shadow: none;
  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease;
  text-align: center;
  border-radius: 35px;
  padding: 8px 34px;
  border: none;
  text-transform: lowercase;
    transform: none !important;
}

.column-2 .button:before {
   background: url(https://cdn.shopify.com/s/files/1/0577/3957/5488/files/Vector_23_2.png?v=1764592651);
  background-size: 100% 100%;
  z-index: 2;
}

.column-2 .button span{
  z-index: 3;
}

.column-2 .button:after {
  content: '';
   background: url(https://cdn.shopify.com/s/files/1/0577/3957/5488/files/Vector_25.png?v=1764592665);
  background-size: 100% 100%;
  padding: 8px 34px;
  bottom: -5px;
  z-index: 1;
  box-shadow: none;
}


.column-2 .button:hover:before {
  background: url(https://cdn.shopify.com/s/files/1/0577/3957/5488/files/Vector_23_3.png?v=1764592664) !important;
  background-size: 100% 100% !important;
}

.column-2 .button:hover:after{
  bottom: -5px;
  box-shadow: none;
}

.section-sections--20805898010849__custom_liquid_pz8bzw-padding .custom-top__wrapper {
  margin-bottom: -11pc !important;
}

@media screen and (min-width: 1024px) and (max-width: 1275px) {
  .newsletter-input{
    width: 50%;
  }
  .column-2 {
    padding: 40px 20px;
  }
}
@media (min-width: 768px) and (max-width:1400px) {
  ul.footer-block__details-content.list-unstyled {
    display: block !important;
  }
  .footer-block.grid__item.scroll-trigger.animate--slide-in {
    max-width: 50% !important;
  }
}
@media (min-width: 768px) and (max-width:1024px){
  section#shopify-section-sections--20805898010849__custom_liquid_pz8bzw {
  margin-top: 0 !important;
}
div#shopify-section-sections--20805898010849__footer {
    margin-top: 0 !important;
}
.section-sections--20805898010849__custom_liquid_pz8bzw-padding .custom-top__wrapper {
  margin-bottom: -2pc !important;
}

.section-sections--20805898010849__custom_liquid_pz8bzw-padding {
  background-color: #f89821 !important;
  margin-top: -1pc !important;
}
  .column-1,
  .column-3{
    order: 1;
    flex: 0 0 50%;
    width: 50%;
  }
  .column-2{
    order: 2;
    flex: 0 0 100%;
  }
}

 @media (max-width: 768px) {
section#shopify-section-sections--20805898010849__custom_liquid_pz8bzw {
  margin-top: -3pc !important;
}
  .columns-wrapper {
    display: flex;
    flex-wrap: wrap;
  }
  .column {
    min-width:auto;
  }

  .column-1 .button {
    font-size: 20px;
  }

  .column-1,
  .column-3 {
    width: 50% !important;
    flex: 0 0 50% !important;
    order: 1;
    padding: 25px 15px !important;
    text-align: center;
  }

  .column-2 {
    width: 100% !important;
    flex: 0 0 100% !important;
    order: 2;
    /* padding: 35px 20px 150px !important; */
  }

  .column-1 a.btn-2 {
    min-width: 200px;
  }

  .column-2 .rich-text {
    padding-top: 10px;
  }
  .footer .grid {
    display: flex !important;
  }

  .footer-block.grid__item {
    margin: 0;
    width: 0 !important;
  }
  
    .footer__content-top {
      padding-left: 30px;
      padding-right: 30px;
    }

    .footer-block__details-content {
      margin-top: 38px;
      margin-bottom: 30px;
    }
}

@media (max-width: 565px) {
    .newsletter-group {
        flex-wrap: wrap;
    }
    .newsletter-btn {
        width: 100%;
    }
    .column {    
        padding: 40px 24px 50px;
    }
}

{% endstylesheet %}

{% javascript %}
document.addEventListener('DOMContentLoaded', function () {
  const form = document.getElementById(`newsletter-form-{{ section.id }}`);
  const messageEl = document.getElementById(`newsletter-message-{{ section.id }}`);

  if (!form) return;

  form.addEventListener('submit', async function (e) {
    e.preventDefault();
    messageEl.textContent = '';
    messageEl.style.color = '';

    const email = form.querySelector('input[type="email"]').value.trim();
    if (!email || !email.includes('@')) {
      messageEl.textContent = 'Please enter a valid email.';
      messageEl.style.color = 'red';
      return;
    }

    try {
      const formData = new FormData(form);
      formData.append('contact[email]', email);

      const response = await fetch('/contact#contact_form', {
        method: 'POST',
        body: formData,
        headers: { 'X-Requested-With': 'XMLHttpRequest' }
      });

      const text = await response.text();
      if (text.includes('Thank you') || text.includes('success')) {
        messageEl.textContent = 'Thanks! You're subscribed.';
        messageEl.style.color = 'green';
        form.reset();
      } else {
        messageEl.textContent = 'Something went wrong.';
        messageEl.style.color = 'red';
      }
    } catch (err) {
      messageEl.textContent = 'Network error.';
      messageEl.style.color = 'red';
    }
  });
});
{% endjavascript %}