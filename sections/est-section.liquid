<section class="estd-section" style="background: {{ section.settings.bg_color }}">
  <div class="estd-container page-width">
    
    {% if section.settings.left_image %}
      <img src="{{ section.settings.left_image | image_url }}" 
           class="estd-floating estd-left" alt="Left deco">
    {% endif %}

    {% if section.settings.right_image %}
      <img src="{{ section.settings.right_image | image_url }}" 
           class="estd-floating estd-right" alt="Right deco">
    {% endif %}

    <h2 class="estd-heading">{{ section.settings.heading }}</h2>
    <p class="estd-text">{{ section.settings.text }}</p>
  </div>

  <!-- Wave Divider -->
  <div class="estd-wave-divider">
    <svg viewBox="0 0 1200 120" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0,60 C200,100 400,20 600,60 C800,100 1000,20 1200,60 L1200,120 L0,120 Z"></path>
    </svg>
  </div>

  <style>
    .estd-section {
      --wave-height: 100px;
      padding: {{ section.settings.padding_top }}px 0 calc(var(--wave-height) + {{ section.settings.padding_bottom }}px) 0;
      position: relative;
      overflow: hidden;
      text-align: center;
    }

    .estd-heading {
      font-size: 84px;
      font-weight: 700;
      color: {{ section.settings.heading_color }};
      margin-bottom: 20px;
    }

    .estd-text {
      max-width: 900px;
      margin: 0 auto;
      font-size: 28px;
      line-height: 1.6;
      color: {{ section.settings.text_color }};
    }

    .estd-floating {
      position: absolute;
      width: 80px;
      opacity: 0.95;
    }

    .estd-left {
      left: 0;
      top: 20%;
    }

    .estd-right {
      right: 0;
      top: 40%;
    }

    /* Wave Divider */
    .estd-wave-divider {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: var(--wave-height);
      overflow: hidden;
      z-index: 1;
    }

    .estd-wave-divider svg {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      fill: {{ section.settings.wave_color | default: '#f5f5dc' }};
    }

    @media(max-width: 768px){
      .estd-section {
        --wave-height: 60px;
      }
      .estd-floating { width: 50px; opacity: 0.6; }
    }
  </style>
</section>

{% schema %}
{
  "name": "ESTD Section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "estâ€™d 2007"
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Description",
      "default": "We began as a couple parents in New York City who wanted healthier meals for their own kids..."
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#0c4434"
    },
    {
      "type": "image_picker",
      "id": "left_image",
      "label": "Left floating image"
    },
    {
      "type": "image_picker",
      "id": "right_image",
      "label": "Right floating image"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 20,
      "max": 200,
      "step": 5,
      "label": "Top Padding",
      "default": 70
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 20,
      "max": 200,
      "step": 5,
      "label": "Bottom Padding",
      "default": 70
    },
    {
      "type": "header",
      "content": "Wave Divider"
    },
    {
      "type": "color",
      "id": "wave_color",
      "label": "Wave Color",
      "default": "#f5f5dc",
      "info": "Color of the wave divider at the bottom"
    }
  ],
  "presets": [
    {
      "name": "ESTD Section"
    }
  ]
}
{% endschema %}
